<!doctype html>
<html lang="ca">
<head>
  <meta charset="utf-8" />
  <title>Cartes Rockin</title>

  <style>
    body{
      font-family: system-ui, -apple-system, Segoe UI;
      background:#111;
      color:white;
      text-align:center;
      margin:0;
      padding:20px;
    }

    h1{ margin-top:0; }

    select, button{
      font-size:18px;
      padding:10px 16px;
      border-radius:10px;
      margin:10px;
      cursor:pointer;
    }

    button{
      background:#ffcc00;
      border:none;
      font-weight:bold;
    }

    img{
      max-width:90%;
      max-height:70vh;
      margin-top:20px;
      border-radius:12px;
      box-shadow:0 8px 25px rgba(0,0,0,.6);
    }
  </style>
</head>

<body>

<h1>ðŸŽ² Cartes Rockin</h1>

<select id="deck"></select>
<button onclick="novaCarta()">Nova carta</button>

<br>
<img id="img">

<script>
let MANIFEST = {}

async function init(){
  const res = await fetch("manifest.json")
  MANIFEST = await res.json()

  const select = document.getElementById("deck")

  Object.keys(MANIFEST).forEach(baralla => {
    const opt = document.createElement("option")
    opt.value = baralla
    opt.textContent = baralla
    select.appendChild(opt)
  })

  novaCarta()
}

function random(arr){
  return arr[Math.floor(Math.random()*arr.length)]
}

function novaCarta(){
  const deck = document.getElementById("deck").value
  const files = MANIFEST[deck]
  const path = random(files)

  document.getElementById("img").src = path + "?t=" + Date.now()
}

init()
</script>

</body>
</html>